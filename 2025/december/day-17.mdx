---
title: "December 17th, 2025"
description: "The day we integrated Google Maps. Everything worked perfectly... except the map. Operation successful, but patient dead."
---

# December 17th, 2025

**Operation Successful, But Patient Dead üíÄ**

Today was the Google Maps integration day. We did everything right ‚Äî SDK enabled, API key configured, native build complete, code working. The UI rendered perfectly. Location detected. Radius slider working. Save button ready.

Just one small problem: **The map was grey.**

---

## The Goal

**Q: What were we trying to build?**

A real, satellite-style Google Map inside our Expo + React Native screen:

- Full-screen map
- Satellite / hybrid view
- Top overlay navbar
- Bottom condition panel
- Smooth native performance (not WebView)

---

## Choosing the Correct Maps Tech

**Q: What was the correct choice?**

‚ùå What we did NOT want:

- Google Maps Web SDK
- WebView-based map
- Fake / static maps

‚úÖ Correct choice:

- Maps SDK for Android
- Via `react-native-maps`
- Provider = `PROVIDER_GOOGLE`

**Lesson:** For native feel + performance ‚Üí Maps SDK for Android is correct.

---

## Setting Up Google Cloud Console

**Q: What did we configure?**

- Created a Google Cloud project
- Enabled Maps SDK for Android
- Generated a Maps Platform API key

At this point:

- API key existed
- SDK was enabled
- Console showed "API Enabled"

So far ‚Üí correct setup.

---

## Adding the API Key to Android

**Q: Where does the API key go?**

```xml
<meta-data
  android:name="com.google.android.geo.API_KEY"
  android:value="YOUR_API_KEY"
/>
```

‚úî Placed inside `<application>`

‚úî Correct key name

‚úî Correct location

**Lesson:** Most Google Maps issues come from wrong placement ‚Äî we did it right.

---

## Installing the Native Maps Library

**Q: How did we install react-native-maps?**

```bash
bunx expo install react-native-maps
```

This did three important things:

- Installed the package
- Picked a version compatible with Expo SDK
- Ensured native modules match Expo runtime

‚úî Correct

‚úî No manual version guessing

‚úî No mismatches

---

## Rebuilding Native Code

**Q: Why did we need to rebuild?**

Because `react-native-maps` is a native module.

```bash
npx expo prebuild
npx expo run:android
```

Result:

- Long Gradle build (10+ minutes)
- NDK + C++ libs compiled
- APK successfully generated

Build initially looked "stuck" at ~92%, but later progressed. That's normal for native libs (Reanimated, Maps, Worklets).

---

## First Runtime Error: AIRMap Not Found

**Q: What was the first error?**

```
Invariant Violation: View config not found for component `AIRMap`
```

**Why this happened:**

- App was running in a runtime without the native module
- Either old dev client, Expo Go, or app not rebuilt after install

**How it got fixed:**

- Full rebuild + install of APK
- Running in development build

‚úî Error disappeared

‚úî Native module loaded

**Lesson:** AIRMap error = native binary mismatch, not code bug.

---

## Map Appears... But It's Grey üòê

**Q: What did we see?**

- Google watermark visible ‚úÖ
- Map UI present ‚úÖ
- Gestures work ‚úÖ
- Location detected ‚úÖ
- Radius slider working ‚úÖ
- But satellite tiles are blank/grey ‚ùå

This is a very specific Google Maps symptom.

---

## What Grey Map Actually Means

**Q: What does grey map + Google watermark mean?**

- ‚úÖ SDK initialized
- ‚úÖ API key recognized
- ‚ùå Map tiles blocked by Google servers

This is NOT:

- Code issue
- Expo issue
- react-native-maps bug
- Android bug
- WSL issue

**This is server-side denial.**

---

## The Real Root Cause: Billing Account Verification üö®

**Q: What was actually wrong?**

Google Cloud showed:

> "To avoid losing access to Google Cloud services, an administrator must verify this account."

And:

- Billing verification failed
- Documents rejected (photo / screenshot)
- Project entered restricted state

**Why this breaks Maps (even though API is enabled):**

Google Maps tiles are:

- A paid data product
- Not a "free API call"
- Served only to trusted + verified projects

When verification fails:

- `PROJECT_STATUS = RESTRICTED`

Result:

- SDK loads ‚úÖ
- UI renders ‚úÖ
- API key accepted ‚úÖ
- Tile requests silently denied ‚ùå
- No error logs ‚ùå
- Just grey tiles

**This is intentional by Google.**

---

## Why This Feels Like "Just a Warning" (But Isn't)

**Q: Why did we think it was just a warning?**

Our intuition: "It's only a warning, not a hard error."

Reality:

- Google UI says "warning"
- Backend treats it as data restriction
- Maps doesn't throw errors to prevent abuse

**Lesson:** Google Maps fails quietly when billing trust is missing.

---

## Final Confirmation Checklist

| Thing | Status |
|-------|--------|
| Maps SDK enabled | ‚úÖ |
| API key correct | ‚úÖ |
| Key added to Android | ‚úÖ |
| Native build correct | ‚úÖ |
| react-native-maps working | ‚úÖ |
| Code correct | ‚úÖ |
| Billing verified | ‚ùå |

**‚û°Ô∏è One missing piece blocks everything.**

---

## What We Learned

- Grey Google Map = billing / project trust issue
- Maps SDK ‚â† free forever
- "API Enabled" ‚â† "data allowed"
- Native map loading has two phases:
  - SDK bootstrap (local)
  - Tile serving (server-side)
- Google doesn't log tile denials
- Code can be perfect and still show blank map

---

## The Verdict

**Q: What was the final conclusion?**

We did everything right technically.

This wasn't a dev mistake ‚Äî it was:

> Google Cloud trust enforcement disguised as a UI warning

And we handled it like real engineers:

- Debugged layer by layer
- Eliminated native issues
- Isolated infra cause

**Operation successful. Patient dead.**

The map integration is complete. The code works. The UI is ready. We just need Google to verify the billing account, and the tiles will appear.

---

## Proof of Work

<Frame caption="The Grey Map of Doom - Everything works except the tiles">
  <img src="/2025/december/pow/17th.png" alt="Google Maps Grey - Operation Successful Patient Dead" />
</Frame>

Everything works. Location detected. UI perfect. Map? Grey. üíÄ
